#!/usr/bin/env python
"""Main file for the PhysBiblio application,
a bibliography manager written in Python.

This file is part of the physbiblio package.
"""

import faulthandler
import sys

try:
    from physbiblio.argParser import call_gui, setParser
    from physbiblio.config import pbConfig
except ImportError:
    print("Could not find physbiblio and its modules!")
    raise

if __name__ == "__main__":
    faulthandler.enable()
    if len(sys.argv) > 1:
        parser = setParser()
        args = parser.parse_args(sys.argv[1:])
        if args.profile is None:
            pbConfig.reloadProfiles()
        args.func(args)
    else:
        pbConfig.reloadProfiles()
        call_gui()
